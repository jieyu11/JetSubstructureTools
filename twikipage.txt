%CERTIFY%
---+!! <nop>%TOPIC%

%TOC% <!-- this line is optional --> 
%STARTINCLUDE%
---+ Introduction

JetSubstructureTools is a dual-use package that computes Jet Substructure moments. It will be used in reconstruction for Run 2 and will also be used by analyses in their own code.

If you have any questions or need help, please email mileswu@uchicago.edu.

 
---+ Variables currently supported

 
   * N-subjettiness (Tau1, Tau2, Tau3)
   * kT splitting scale (Split12, Split23, Split34)
   * zCut (ZCut12, ZCut23, ZCut34)
   * Dipolarity (Dip12, Dip13, Dip23, !DipExcl12)
   * Angularity (Angularity)
   * kT Delta R (KtDR)
   * kT Mass Drop (Mu12)
   * Planar Flow (PlanarFlow)
Descriptions of the variables are given on the JetSubstructureVariables page.

 
---+ Examples on how to use
---++ Athena/xAOD

First of all, setup a nightly release of Athena. For example:
<verbatim>export ATLAS_LOCAL_ROOT_BASE=/cvmfs/atlas.cern.ch/repo/ATLASLocalRootBase
source ${ATLAS_LOCAL_ROOT_BASE}/user/atlasLocalSetup.sh > /dev/null
asetup dev,rel_3,gcc47,64,opt,here --nightliesarea=/cvmfs/atlas-nightlies.cern.ch/repo/sw/nightlies/x86_64-slc6-gcc47-opt</verbatim>

Next, checkout and compile the dependencies:
<verbatim> cmt co Control/AthToolSupport/AsgTools
 cmt co -r xAODCaloEventCnv-00-00-11 Event/xAOD/xAODCaloEventCnv
 cmt co Event/xAOD/xAODJet
 cmt co Event/xAOD/xAODJetAthenaPool
 cmt co Reconstruction/Jet/JetInterface
 cmt co Reconstruction/Jet/JetEDM
 cmt co Reconstruction/Jet/JetRec 
 
 cd Event/xAOD/xAODCaloEventCnv/cmt; cmt config; make; cd $TestArea
 cd Control/AthToolSupport/AsgTools/cmt; cmt config; make; cd $TestArea
 cd Event/xAOD/xAODJet/cmt; cmt config; make; cd $TestArea
 cd Event/xAOD/xAODJetAthenaPool/cmt; cmt config; make; cd $TestArea 
 cd Reconstruction/Jet/JetInterface/cmt; cmt config; make; cd $TestArea 
 cd Reconstruction/Jet/JetEDM/cmt; cmt config; make; cd $TestArea
 cd Reconstruction/Jet/JetRec/cmt; cmt config; make; cd $TestArea</verbatim>

Finally checkout and compile JetSubstructureTools itself:
<verbatim>cmt co Reconstruction/Jet/JetSubStructureMomentTools
cd Reconstruction/Jet/JetSubStructureMomentTools/cmt; cmt config; make; cd $TestArea</verbatim>

To add substructure moments to a file with an existing xAOD jets collection, run:
<verbatim>cd Reconstruction/Jet/JetSubStructureMomentTools/share
<edit run.py to include path to xAOD file and jet collection name (infile and clname)>
athena.py run.py</verbatim>

This should create a file named xAOD.root which now has substructure moments added to the jets.

 
---++ ROOT/xAOD
---++ ROOT/ntuples
---+  
---+ Technical Details
---

<!-- For significant updates to the topic, consider adding your 'signature' (beneath this editing box) --> *Major updates*:%BR% -- Main.MilesWu - 29 Jan 2014

<!-- Person responsible for the page: 
Either leave as is - the creator's name will be inserted; 
Or replace the complete REVINFO tag (including percentages symbols) with a name in the form Main.TwikiUsersName --> 
%RESPONSIBLE% %REVINFO{"$wikiusername" rev="1.1"}% %BR% <!-- Once this page has been reviewed, please add the name and the date e.g. Main.StephenHaywood - 31 Oct 2006 --> 
%REVIEW% *Never reviewed*

%TWISTY{
mode="div"
showlink="Show history of this page..."
hidelink="Hide history"
showimgleft="%ICONURLPATH{toggleopen-small}%"
hideimgleft="%ICONURLPATH{toggleclose-small}%"
}%
   * r8 - Add KtDR, Planar Flow and kT Mass drop [21/02/14]
   * r7 - Updated instructions for new location [19/02/14]
   * r6 - Added Dipolarity and Angularity [10/02/14]
   * r5 - Changed SPLIT to Split. Added Zcut [07/02/14]
   * r4 - Updated list of moments to include SPLITXY [05/02/14]
   * <span style="background-color: transparent;">r3 - Added cmt checkout paths for package [04/02/14]</span>
   * <span style="background-color: transparent;">r2 - Updated repo location [03/02/14]</span>
   * <span style="background-color: transparent;">r1 - Initial version of page [29/01/14]</span>
%ENDTWISTY%

%STOPINCLUDE%
